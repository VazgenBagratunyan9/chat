(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{16:function(e,t,n){e.exports={form:"auth_form__piqw1",error:"auth_error__31Mvz",success:"auth_success__11Y36"}},17:function(e,t,n){e.exports={containerGuest:"UserItem_containerGuest__1OEoR",containerOwner:"UserItem_containerOwner__28dze",userInfo:"UserItem_userInfo__1fAZ-",image:"UserItem_image__1pvsM",name:"UserItem_name__2krnc",text:"UserItem_text__av-uW"}},22:function(e,t,n){e.exports={container:"Chat_container__iuL_G",chat:"Chat_chat__OUlPY",text:"Chat_text__2QFgj"}},23:function(e,t,n){e.exports={header:"header_header__suE0y",logo:"header_logo__3wM-0",navigation:"header_navigation__3awET"}},24:function(e,t,n){e.exports={user:"user_user__2G7V7",verificate_message:"user_verificate_message__15n-5"}},37:function(e,t,n){},39:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n(18),s=n.n(c),o=(n(37),n(5)),l=n.n(o),i=n(13),u=n(7);n(39);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function b(e,t){var n=e.title,c=e.titleId,s=d(e,["title","titleId"]);return a.createElement("svg",j({height:"512pt",viewBox:"0 0 512 512.0002",width:"512pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},s),n?a.createElement("title",{id:c},n):null,r||(r=a.createElement("path",{d:"m256 0c-141.484375 0-256 114.496094-256 256 0 44.902344 11.710938 88.757812 33.949219 127.4375l-32.984375 102.429688c-2.300782 7.140624-.410156 14.96875 4.894531 20.273437 5.253906 5.253906 13.0625 7.214844 20.273437 4.894531l102.429688-32.984375c38.679688 22.238281 82.535156 33.949219 127.4375 33.949219 141.484375 0 256-114.496094 256-256 0-141.484375-114.496094-256-256-256zm0 472c-40.558594 0-80.09375-11.316406-114.332031-32.726562-4.925781-3.078126-11.042969-3.910157-16.734375-2.078126l-73.941406 23.8125 23.8125-73.941406c1.804687-5.609375 1.042968-11.734375-2.082032-16.734375-21.40625-34.238281-32.722656-73.773437-32.722656-114.332031 0-119.101562 96.898438-216 216-216s216 96.898438 216 216-96.898438 216-216 216zm25-216c0 13.804688-11.191406 25-25 25s-25-11.195312-25-25c0-13.808594 11.191406-25 25-25s25 11.191406 25 25zm100 0c0 13.804688-11.191406 25-25 25s-25-11.195312-25-25c0-13.808594 11.191406-25 25-25s25 11.191406 25 25zm-200 0c0 13.804688-11.191406 25-25 25-13.804688 0-25-11.195312-25-25 0-13.808594 11.195312-25 25-25 13.808594 0 25 11.191406 25 25zm0 0"})))}var f,p,m,O,h,g,x,v,w,_,y,E,N,S,I,k,P=a.forwardRef(b),C=(n.p,n(14)),F=n(4),T=n.n(F);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function z(e,t){var n=e.title,r=e.titleId,c=L(e,["title","titleId"]);return a.createElement("svg",D({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,f||(f=a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z M335.083,271.083 L228.416,377.749c-4.16,4.16-9.621,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251c-8.341-8.341-8.341-21.824,0-30.165 L289.835,256l-91.584-91.584c-8.341-8.341-8.341-21.824,0-30.165s21.824-8.341,30.165,0l106.667,106.667 C343.424,249.259,343.424,262.741,335.083,271.083z"})))),p||(p=a.createElement("g",null)),m||(m=a.createElement("g",null)),O||(O=a.createElement("g",null)),h||(h=a.createElement("g",null)),g||(g=a.createElement("g",null)),x||(x=a.createElement("g",null)),v||(v=a.createElement("g",null)),w||(w=a.createElement("g",null)),_||(_=a.createElement("g",null)),y||(y=a.createElement("g",null)),E||(E=a.createElement("g",null)),N||(N=a.createElement("g",null)),S||(S=a.createElement("g",null)),I||(I=a.createElement("g",null)),k||(k=a.createElement("g",null)))}var R=a.forwardRef(z),G=(n.p,n(1)),M=function(e){var t=e.children,n=e.className,r=e.isOpen,a=e.handleModalClose,c=e.start,o=T()({"ns-modal":!0,open:r&&c,close:!r&&c}),l=T()(Object(C.a)({"ns-modal__wrapper":!0},n,n));return s.a.createPortal(Object(G.jsxs)("div",{className:o,children:[Object(G.jsxs)("span",{className:"close-modal",onClick:a,children:[" ",Object(G.jsx)(R,{})," "]}),Object(G.jsx)("div",{className:l,children:Object(G.jsx)("div",{className:"wrapper",children:t})})]}),document.getElementById("root"))},U=n(11),B=n(22),A=n.n(B),J=n(17),W=n.n(J),Y=n(10),q=Object(Y.b)()((function(e){var t,n=e.url,r=e.fullName,a=e.text,c=e.userID,s=Object(Y.c)((function(e){return e.user.data?e.user.data.id:null}));console.log(s);var o=T()((t={},Object(C.a)(t,W.a.containerGuest,c===s),Object(C.a)(t,W.a.containerOwner,c!==s),t));return Object(G.jsxs)("div",{className:o,children:[Object(G.jsxs)("div",{className:W.a.userInfo,children:[Object(G.jsx)("span",{className:W.a.image,children:Object(G.jsx)("img",{src:n,alt:"user image"})}),Object(G.jsx)("span",{className:W.a.name,children:r})]}),Object(G.jsx)("div",{className:W.a.text,children:Object(G.jsx)("span",{children:a})})]})})),H=n(27),K=n.n(H),Q="https://bewedoc.ru/api",V=Object(Y.b)()((function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],c=n[1],s=Object(a.useRef)(),o=function(){var t=Object(i.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(13!==n.which){t.next=7;break}return n.preventDefault(),(r=new FormData).append("message",n.target.value),r.append("user_id",e.id),t.next=7,fetch(Q+"/message/send",{method:"POST",body:r}).then((function(e){return e.json()})).then((function(e){e.status&&(n.target.value="")}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){K.a.logToConsole=!0,new K.a("ab088ff917001a1119d6",{cluster:"eu"}).subscribe("nordil").bind("my-event",(function(e){c(e)}))}),[]),Object(a.useEffect)((function(){s.current.scrollTop=s.current.scrollHeight}),[r]),Object(G.jsxs)("div",{className:A.a.container,children:[Object(G.jsx)("div",{className:A.a.chat,ref:s,children:r.map((function(e){return Object(G.jsx)(q,Object(U.a)({},e),e.id)}))}),Object(G.jsx)("div",{className:A.a.text,children:Object(G.jsx)("textarea",{onKeyPress:o,children:" "})})]})})),X=n(23),Z=n.n(X),$=n(15),ee=function(e){var t=Object(a.useContext)(fe).status,n=function(){var t=Object(i.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("id",e.id),t.next=4,fetch("https://bewedoc.ru/api/user/logout",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token","")}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.jsxs)("header",{className:T()(Z.a.header),children:[Object(G.jsx)("div",{className:T()(Z.a.logo),children:Object(G.jsx)($.b,{to:"/",children:Object(G.jsx)("h2",{children:"Bewedoc"})})}),Object(G.jsx)("nav",{className:T()(Z.a.navigation),children:t?Object(G.jsx)("a",{href:"/login",onClick:n,children:"Logout"}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)($.c,{to:"login",children:"Login"}),Object(G.jsx)($.c,{to:"registration",children:"Registration"})]})})]})},te=n(3),ne=n(16),re=n.n(ne),ae="LOGIN",ce="GET_USER",se="LOADING";function oe(e){return function(t){t(le(!0));var n=new FormData;n.append("token",e),fetch(Q+"/user",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){t({type:ce,payload:e}),t(le(!1))}))}}function le(e){return{type:se,payload:e}}var ie=Object(Y.b)((function(e){return{user:e.user}}))((function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),o=Object(u.a)(s,2),j=o[0],d=o[1],b=function(){var t=Object(i.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=new FormData(n.target),a=fetch("https://bewedoc.ru/api/user/login",{method:"POST",body:r}),t.next=5,a;case 5:t.sent.json().then((function(t){var n;t.status?(d(!0),c(""),localStorage.setItem("token",t.token),e.dispatch((n=t.status,{type:ae,payload:n}))):c(t.message)}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){console.log(j),d(!1)}}),[]),Object(G.jsxs)(G.Fragment,{children:[j?Object(G.jsx)(te.a,{to:"/"}):"",Object(G.jsxs)("form",{className:T()(re.a.form),onSubmit:b,children:[Object(G.jsx)("h2",{children:"Login"}),r?Object(G.jsx)("p",{className:T()(re.a.error),children:r}):"",Object(G.jsx)("input",{type:"email",name:"email",placeholder:"email"}),Object(G.jsx)("input",{type:"password",name:"password",placeholder:"password"}),Object(G.jsx)("button",{type:"submit",children:"Login"})]})]})})),ue=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),s=Object(u.a)(c,2),o=s[0],j=s[1],d=Object(a.useState)(!1),b=Object(u.a)(d,2),f=b[0],p=b[1],m=function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(t.target),e.next=4,fetch(Q+"/user/registration",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){e.status&&setTimeout((function(){p(!0)}),2e3),j(e.status),r(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){p(!1),r(""),j(!1)}}),[]),Object(G.jsxs)("form",{className:T()(re.a.form),onSubmit:m,children:[f?Object(G.jsx)(te.a,{to:"/login"}):"",Object(G.jsx)("h2",{children:"Registration"}),n?Object(G.jsx)("p",{className:T()(o?re.a.success:re.a.error),children:n}):"",Object(G.jsx)("input",{type:"text",name:"full_name",placeholder:"Full Name"}),Object(G.jsx)("input",{type:"email",name:"email",placeholder:"email"}),Object(G.jsx)("input",{type:"password",name:"password",placeholder:"password"}),Object(G.jsx)("input",{type:"password",name:"password_confirm",placeholder:"password confirm"}),Object(G.jsx)("button",{type:"submit",children:"Registration"})]})},je=n(24),de=n.n(je),be=function(e){var t=e.user;if(t.data){var n="https://".concat(t.data.email.split("@")[1]);return null!==t.data.verifite_email?Object(G.jsx)("div",{className:T()(de.a.user),children:Object(G.jsx)("h2",{children:t.data.full_name})}):Object(G.jsx)("div",{className:T()(de.a.user),children:Object(G.jsxs)("a",{target:"_blank",href:n,className:T()(de.a.verificate_message),children:["please confirm your account, an email has been sent to this mail: ",t.data.email," "]})})}return Object(G.jsx)(G.Fragment,{})},fe=Object(a.createContext)({});var pe=Object(Y.b)((function(e){return{user:e.user}}))((function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),o=Object(u.a)(s,2),j=o[0],d=o[1],b=e.user.status,f=e.user,p=e.dispatch;return console.log(f),Object(a.useEffect)((function(){var e,t=null!==(e=localStorage.getItem("token"))&&void 0!==e?e:"";p(oe(t))}),[]),Object(a.useEffect)(Object(i.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://bewedoc.ru/api/message");case 2:r=null!==(n=localStorage.getItem("token"))&&void 0!==n?n:"",e.dispatch(oe(r));case 4:case"end":return t.stop()}}),t)}))),[b]),Object(G.jsx)(fe.Provider,{value:{status:b},children:Object(G.jsxs)("div",{className:"App",children:[Object(G.jsx)(ee,{id:f.data?f.data.id:null}),!r&&f.status&&Object(G.jsx)("span",{className:"message-button",onClick:function(){c((function(e){return!e})),d(!0)},children:Object(G.jsx)(P,{})}),Object(G.jsx)(M,{isOpen:r,start:j,handleModalClose:function(){c((function(e){return!e}))},children:Object(G.jsx)(V,{id:e.user.data?e.user.data.id:1})}),e.user.status?Object(G.jsx)(be,{user:e.user}):Object(G.jsxs)(te.d,{children:[Object(G.jsx)(te.b,{path:"/login",children:Object(G.jsx)(ie,{})}),Object(G.jsx)(te.b,{path:"/registration",children:Object(G.jsx)(ue,{})})]})]})})})),me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},Oe=n(20),he=n(31),ge=n(32),xe={status:!1,data:[],loading:!1},ve=Object(Oe.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case ae:return Object(U.a)(Object(U.a)({},e),{},{status:r});case ce:return Object(U.a)(Object(U.a)({},e),{},{status:r.status,data:r.user});case se:return Object(U.a)(Object(U.a)({},e),{},{loading:r});default:return e}}}),we=[ge.a],_e=Object(Oe.createStore)(ve,Object(he.composeWithDevTools)(Oe.applyMiddleware.apply(void 0,we)));s.a.render(Object(G.jsx)(Y.a,{store:_e,children:Object(G.jsx)($.a,{children:Object(G.jsx)(pe,{})})}),document.getElementById("root")),me()}},[[50,1,2]]]);
//# sourceMappingURL=main.ea9b0259.chunk.js.map